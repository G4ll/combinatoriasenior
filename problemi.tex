\documentclass[a4paper,10pt]{article}

\usepackage[utf8]{inputenc}
\usepackage[italian]{babel}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsfonts}

%%% Comandi per far funzionare la catalogazione dei problemi %%%
\usepackage{substr}
\usepackage{xstring}
\usepackage{etoolbox}

\newcount\problemi
\problemi=0

% Comando per registrare un nuovo problema
\newcommand{\Problema}[5]{%
	\expandafter\def\csname Gara\the\problemi\endcsname{#1}
	\expandafter\def\csname Anno\the\problemi\endcsname{#2}
	\expandafter\def\csname Numero\the\problemi\endcsname{#3}
	\expandafter\def\csname Tags\the\problemi\endcsname{#4}
	\expandafter\def\csname Commento\the\problemi\endcsname{#5}
	\advance\problemi by 1
}

% Comandi privati
\newcount\it
% print long version of the #1-th \Problema
\newcommand{\PrintLong}[1]{%
	Problema: \csname Gara\the#1\endcsname \csname Anno\the#1\endcsname\ - \csname Numero\the#1\endcsname\\
	Tags: \csname Tags\the#1\endcsname\\
	Commento: \csname Commento\the#1\endcsname\\[5mm]
}
% print only identification of the #1-th \Problema
\newcommand{\PrintShort}[1]{%
	\csname Gara\the#1\endcsname\StrRight{\csname Anno\the#1\endcsname}{2} .\csname Numero\the#1\endcsname ,
}
\newcommand{\PrintTag}[1]{%
	\subsection{#1}
	\it=0%
	\loop
		\def\listoftags{\csname Tags\the\it\endcsname}%
		\IfSubStringInString{#1}{\listoftags}
		{\PrintShort{\it}}\relax%
		\advance\it by 1
	\ifnum\it < \the\problemi
	\repeat
}

% Comandi pubblici
\newcommand{\PerId}{%
	\it=0%
	\loop
		\PrintLong{\it}
		\advance\it by 1
	\ifnum\it < \the\problemi
	\repeat
}
\newcommand{\PerTag}{%
	\forcsvlist{\PrintTag}{esistenza,nonesistenza,costruttivo,conteggi,doublecounting,pigeonhole,invarianti,colorazioni,estremale,algoritmi,geometrico,grafi,gioco,tabelle}
}



%%% Introdurre qui i problemi %%%
%
% in questa forma:
%\Problema{gara}{anno}{numero}{tags}{commento}
%
% i tag previsti sono:
% 'esistenza' (eventualmente 'costruttivo') e/o 'nonesistenza'
% 'conteggi', 'doublecounting', 'pigeonhole', 'invarianti', 'colorazioni', 'estremale', 'algoritmi'
% 'geometrico', 'grafi', 'gioco', 'tabelle'

\Problema{IMOSL}{2016}{1}
{esistenza,costruttivo,nonesistenza,conteggi}
{}

\Problema{IMOSL}{2016}{2}
{nonesistenza,estremale,tabelle}
{}

\Problema{IMOSL}{2016}{3}
{nonesistenza,doublecounting}
{}

\Problema{IMOSL}{2016}{4}
{esistenza,costruttivo,nonesistenza,doublecounting,tabelle}
{}

\Problema{IMOSL}{2016}{5}
{esistenza,costruttivo,nonesistenza,estremale,geometrico}
{}

\Problema{IMOSL}{2016}{6}
{esistenza,costruttivo,grafi}
{Costruzione induttiva}

\Problema{IMOSL}{2016}{7}
{esistenza,costruttivo,invarianti,doublecounting,geometrico}
{}

\Problema{IMOSL}{2015}{1}
{esistenza,estremale}
{Diversi approcci induttivi.}

\Problema{IMOSL}{2015}{2}
{esistenza,costruttivo,nonesistenza,doublecounting,geometrico}
{Le parti di esistenza e non esistenza sono bilanciate.}

\Problema{IMOSL}{2015}{3}
{esistenza,costruttivo,nonesistenza}
{La parte di esistenza costruttiva è trascurabile.}

\Problema{IMOSL}{2015}{4}
{esistenza,gioco}
{Strategia dell'accoppiamento delle mosse. Esistono approcci anche piuttosto costruttivi.}

\Problema{IMOSL}{2015}{5}
{esistenza,doublecounting,pigeonhole,grafi}
{La stima del testo si fa con un doublecounting; pigeonhole ha minore rilevanza, aiuta solo per una piccola stima.}

\Problema{IMOSL}{2015}{6}
{esistenza}
{Dimostrazione per assurdo e altri ragionamenti di natura poco costruttiva o esplicita.}

\Problema{IMOSL}{2015}{7}
{esistenza,costruttivo,conteggi,estremale,algoritmi,grafi}
{Il cuore del problema usa un algoritmo per costruire un ciclo cromatico che funziona per una scelta estremale fatta all'inizio. La parte di conteggi serve solo per ricondurre questa parte alla richiesta del problema.}

\Problema{BMO}{2017}{4}
{esistenza, costruttivo, nonesistenza, gioco}
{Sia l'esistenza che la non-esistenza si possono dimostrare per induzione.}

\Problema{BMO}{2016}{4}
{nonesistenza, colorazioni}
{Forse piuttosto che colorazioni sarebbe più adatto tassellazioni.}

\Problema{BMO}{2015}{3}
{esistenza, doublecounting}
{}

\Problema{BMO}{2014}{4}
{conteggi}
{}

\Problema{BMO}{2013}{4}
{esistenza, estremale, grafi}
{La vera tesi è ``esiste un vertice di grado $\le2$''.}

\Problema{BMO}{2012}{3}
{esistenza, algoritmi}
{Algoritmo greedy.}

\Problema{BMO}{2011}{4}
{esistenza, pigeonhole, geometrico}
{}

\Problema{BMO}{2010}{3}
{esistenza, estremale, geometrico}
{Almeno due soluzioni diverse: punti a massima distanza e triangolo di massima area.}

\Problema{BMO}{2009}{3}
{nonesistenza, colorazioni}
{}

\Problema{BMO}{2008}{3}
{conteggi}
{Si raggruppano la maggior parte delle rette a gruppi di 4 + considerazioni di TdN 
sulle rimanenti.}

\Problema{BMO}{2007}{4}
{esistenza, costruttivo, nonesistenza, conteggi, geometrico}
{Gli esempi sono noiosi da spiegare.}

\Problema{BMO}{2006}{4}
{grafi}
{}

\Problema{BMO}{2005}{4}
{esistenza, costruttivo, nonesistenza, pigeonhole}
{La parte di esistenza è banale.}

\Problema{BMO}{2004}{4}
{esistenza, costruttivo, colorazioni}
{}

\Problema{BMO}{2003}{4}
{esistenza, costruttivo}
{L'ambientazione ``geometrica'' scompare dopo un'opportuna riformulazione.}

\Problema{BMO}{2002}{1}
{esistenza, grafi}
{}

\Problema{BMO}{2001}{4}
{nonesistenza, invarianti}
{La soluzione si basa principalmente su parità/disparità delle permutazioni; le invarianti servono solo a dire che il numero di mosse è pari.}

\Problema{BMO}{2000}{3}
{esistenza, costruttivo, nonesistenza, colorazioni}
{La parte di esistenza è banale.}

\Problema{BMO}{1999}{4}
{doublecounting}
{Non so se sia proprio combinatoria, però c'è una soluzione molto elegante che è una sorta di DC. Inoltre il testo riportato su AOPS è falso, suppongo che il prodotto sia 
in realtà una somma.}

%BMO1998 non ha problemi di Combinatoria

\Problema{BMO}{1997}{2}
{esistenza, pigeonhole}
{}

\Problema{BMO}{1996}{4}
{esistenza, costruttivo}
{}

\Problema{BMO}{1995}{4}
{conteggi, doublecounting}
{Non so se esista un argomento elegante per dire che il numero di quadrati è 6 volte il numero di coppie di punti.}

\Problema{BMO}{1994}{4}
{esistenza, costruttivo, nonesistenza, doublecounting, grafi}
{}

\Problema{BMO}{1993}{2}
{conteggi}
{}

\Problema{BMO}{1992}{4}
{esistenza, costruttivo, nonesistenza, pigeonhole}
{}

%BMO1991 non ha problemi di Combinatoria

\Problema{BMO}{1990}{4}
{esistenza, costruttivo, nonesistenza, grafi}
{}

\Problema{BMO}{1989}{4}
{esistenza, nonesistenza, pigeonhole, doublecounting}
{Forse esistono anche metodi costruttivi per l'esistenza, ma quello non costruttivo è molto carino.}

%BMO1988 non ha problemi di Combinatoria

%BMO1987 non ha problemi di Combinatoria

%BMO1986 non ha problemi di Combinatoria

\Problema{BMO}{1985}{4}
{esistenza, pigeonhole, grafi}
{}

%BMO1984 non ha problemi di Combinatoria


%%% Nel documento non dovrebbe servire toccare nulla %%%
\setcounter{secnumdepth}{0}
\begin{document}
\section{Per tag}
\PerTag
\section{Per id}
\PerId
\end{document}
